---
// biome-ignore lint/correctness/noUnusedImports: used in Astro template below
import LivePreview from "../components/LivePreview.astro";
// biome-ignore lint/correctness/noUnusedImports: used in Astro template below
import Layout from "../layouts/Layout.astro";
---

<Layout title="CCCP.PS â€” Status">
	<img src="/cccp-logo.svg" alt="CCCP.PS logo" class="hero-logo" />
	<h1 class="hero-title">CCCP.PS</h1>

	<div class="content-container">
		<div class="status-box">
					<div class="status">
						<span class="status-dot"></span>
						<span class="status-text" id="status-text">MAINTENANCE SCHEDULED</span>
					</div>

					<div class="timer-label" id="timer-label">Server goes offline in...</div>

					<div class="timer" role="timer" aria-live="polite" aria-atomic="true" id="timer">
						<div class="timer-segment">
							<span class="timer-digit" id="days">--</span>
							<span class="timer-unit">DAYS</span>
						</div>
						<span class="timer-colon" aria-hidden="true">:</span>
						<div class="timer-segment">
							<span class="timer-digit" id="hours">--</span>
							<span class="timer-unit">HRS</span>
						</div>
						<span class="timer-colon" aria-hidden="true">:</span>
						<div class="timer-segment">
							<span class="timer-digit" id="mins">--</span>
							<span class="timer-unit">MIN</span>
						</div>
						<span class="timer-colon" aria-hidden="true">:</span>
						<div class="timer-segment">
							<span class="timer-digit" id="secs">--</span>
							<span class="timer-unit">SEC</span>
						</div>
					</div>

					<p class="description">
						Plex and all supporting services (*arr stack) are going offline
						for indefinite maintenance. Check Discord for updates on when
						services will be restored.
					</p>

					<LivePreview />

					<hr class="section-divider" aria-hidden="true" />

					<div class="comms-box">
						<p class="comms-desc">Join the community for real-time updates and discussions.</p>
						<div class="discord-links">
							<a href="https://discord.com/channels/333693176944525324/772394563792666673/1466005774315819204" target="_blank" rel="noopener noreferrer" class="discord-btn">
								<svg class="discord-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>
								View Announcement
							</a>
							<a href="https://discord.com/channels/333693176944525324/772394563792666673" target="_blank" rel="noopener noreferrer" class="discord-btn">
								<svg class="discord-icon" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>
								#plex-news
							</a>
						</div>
					</div>
				</div>
	</div>
</Layout>

<style>
	/* Hero */
	.hero-logo {
		width: clamp(60px, 10vw, 90px);
		height: auto;
		margin-bottom: 1rem;
		animation: float 6s ease-in-out infinite;
	}

	@keyframes float {
		0%, 100% { transform: translateY(0); }
		50% { transform: translateY(-3px); }
	}

	.hero-title {
		font-family: 'Bebas Neue', sans-serif;
		font-size: clamp(2rem, 5vw, 3rem);
		letter-spacing: 0.25em;
		font-weight: 400;
		color: #e8e6e3;
		margin-bottom: 3rem;
	}

	/* Content */
	.content-container {
		width: 100%;
		max-width: 600px;
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	.section-divider {
		border: none;
		border-top: 1px solid #1a1a1d;
		width: 100%;
		margin: 1rem 0 2rem 0;
	}

	/* Status Box */
	.status-box {
		display: flex;
		flex-direction: column;
		align-items: center;
	}

	/* Status indicator */
	.status {
		display: flex;
		align-items: center;
		gap: 0.6rem;
		margin-bottom: 2rem;
		background: #111113;
		padding: 0.5rem 1.25rem;
		border-radius: 999px;
		border: 1px solid #1a1a1d;
	}

	.status-dot {
		width: 8px;
		height: 8px;
		border-radius: 50%;
		background: #c9434d;
		flex-shrink: 0;
		animation: pulse-dot 2s ease-in-out infinite;
	}

	@keyframes pulse-dot {
		0%, 100% { opacity: 1; }
		50% { opacity: 0.3; }
	}

	.status-text {
		font-size: 0.7rem;
		letter-spacing: 0.15em;
		color: #7a7880;
		font-weight: 500;
	}

	/* Timer label */
	.timer-label {
		font-size: 0.8rem;
		color: #7a7880;
		margin-bottom: 1rem;
		letter-spacing: 0.05em;
	}

	/* Timer */
	.timer {
		display: flex;
		align-items: baseline;
		gap: clamp(0.4rem, 2vw, 1rem);
		margin-bottom: 2.5rem;
		font-variant-numeric: tabular-nums;
	}

	.timer-segment {
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 0.35rem;
	}

	.timer-digit {
		font-family: 'Bebas Neue', sans-serif;
		font-size: clamp(3.5rem, 10vw, 7rem);
		line-height: 1;
		color: #c9434d;
		animation: glow-pulse 3s ease-in-out infinite;
	}

	@keyframes glow-pulse {
		0%, 100% { text-shadow: 0 0 20px rgba(201, 67, 77, 0.3), 0 0 40px rgba(201, 67, 77, 0.1); }
		50% { text-shadow: 0 0 30px rgba(201, 67, 77, 0.5), 0 0 60px rgba(201, 67, 77, 0.2); }
	}

	.timer-unit {
		font-size: 0.65rem;
		letter-spacing: 0.2em;
		color: #4a484f;
		font-weight: 500;
	}

	.timer-colon {
		font-family: 'Bebas Neue', sans-serif;
		font-size: clamp(2.5rem, 7vw, 5rem);
		color: #c9434d;
		opacity: 0.4;
		align-self: flex-start;
		line-height: 1;
		margin-top: 0.05em;
	}

	/* Description */
	.description {
		max-width: 480px;
		font-size: 0.85rem;
		line-height: 1.7;
		color: #7a7880;
		margin-bottom: 2rem;
		text-align: center;
	}

	/* Comms Box */
	.comms-box {
		display: flex;
		flex-direction: column;
		align-items: center;
		padding: 2rem 0;
	}

	.comms-desc {
		font-size: 0.9rem;
		color: #7a7880;
		margin-bottom: 2rem;
		text-align: center;
	}

	/* Discord links */
	.discord-links {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		align-items: center;
		width: 100%;
		max-width: 300px;
	}

	.discord-btn {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		padding: 0.8rem 1.5rem;
		border-radius: 4px;
		border: 1px solid #1a1a1d;
		background: #111113;
		color: #e8e6e3;
		text-decoration: none;
		font-size: 0.9rem;
		font-family: 'JetBrains Mono', monospace;
		transition: all 0.2s ease;
		width: 100%;
		justify-content: center;
	}

	.discord-btn:hover {
		border-color: #5865F2; /* Discord color */
		box-shadow: 0 0 16px rgba(88, 101, 242, 0.15);
		transform: translateY(-1px);
	}

	.discord-icon {
		width: 20px;
		height: 20px;
		flex-shrink: 0;
	}

	/* Reduced motion */
	@media (prefers-reduced-motion: reduce) {
		.hero-logo { animation: none; }
		.status-dot { animation: none; }
		.timer-digit { animation: none; text-shadow: 0 0 20px rgba(201, 67, 77, 0.3); }
	}
</style>

<script is:inline>
	// Timer logic
	(function () {
		var TARGET = 1771088400; // 2026-02-14T18:00:00 CET (Europe/Copenhagen)
		var daysEl = document.getElementById('days');
		var hoursEl = document.getElementById('hours');
		var minsEl = document.getElementById('mins');
		var secsEl = document.getElementById('secs');
		var labelEl = document.getElementById('timer-label');
		var statusEl = document.getElementById('status-text');

		if (!daysEl) return;

		function pad(n) {
			return String(n).padStart(2, '0');
		}

		function update() {
			var now = Math.floor(Date.now() / 1000);
			var diff = TARGET - now;
			var counting_down = diff > 0;

			if (!counting_down) {
				diff = Math.abs(diff);
			}

			var d = Math.floor(diff / 86400);
			var h = Math.floor((diff % 86400) / 3600);
			var m = Math.floor((diff % 3600) / 60);
			var s = diff % 60;

			daysEl.textContent = pad(d);
			hoursEl.textContent = pad(h);
			minsEl.textContent = pad(m);
			secsEl.textContent = pad(s);

			labelEl.textContent = counting_down
				? 'Server goes offline in...'
				: 'Server has been down for...';
			statusEl.textContent = counting_down
				? 'MAINTENANCE SCHEDULED'
				: 'MAINTENANCE IN PROGRESS';
		}

		update();
		setInterval(update, 1000);
	})();
</script>