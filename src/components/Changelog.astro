---
interface ChangelogEntry {
	date: string;
	day: string;
	title: string;
	body: string;
	type: "current" | "update";
}

const entries: ChangelogEntry[] = [
	{
		date: "2026-02-18",
		day: "Tuesday",
		title: "Current Status",
		body: "ETA for services coming back online is late Friday / Saturday. Experiencing issues with the .ps country-code TLD registrar not delivering verification emails, which is blocking DNS updates. Monitoring the situation.",
		type: "current",
	},
	{
		date: "2026-02-18",
		day: "Tuesday",
		title: "Docker Compose & Network Tuning",
		body: "Finalized Docker Compose configurations for the full *arr stack. Tuned bridge networking and DNS resolution. All containers pulling and launching cleanly.",
		type: "update",
	},
	{
		date: "2026-02-17",
		day: "Monday",
		title: "Ubuntu VM & Security Hardening",
		body: "Provisioned Ubuntu Server VM on Unraid. Configured SSH hardening, firewall rules, and fail2ban. Migrated TinyAuth reverse-proxy authentication layer.",
		type: "update",
	},
	{
		date: "2026-02-16",
		day: "Sunday",
		title: "Unraid Host Setup & Research",
		body: "Completed Unraid host configuration — shares, cache pools, parity check. Spun up initial Ubuntu VM. Spent time researching best practices for Docker-on-VM vs bare-metal containers.",
		type: "update",
	},
	{
		date: "2026-02-15",
		day: "Saturday",
		title: "Physical Migration to Supermicro SC847",
		body: "Moved all drives into the Supermicro SC847 chassis. Debugged HBA card passthrough issues — reseated cards and updated firmware. All 24 bays now recognized.",
		type: "update",
	},
	{
		date: "2026-02-14",
		day: "Friday",
		title: "Backups & Boot Drive Prep",
		body: "Ran full backups of Plex metadata, databases, and *arr configurations. Prepared Unraid USB boot drive and validated license. Server taken offline.",
		type: "update",
	},
];

function formatDate(date: string, day: string): string {
	const d = new Date(date + "T00:00:00");
	const month = d.toLocaleString("en-US", { month: "short" }).toUpperCase();
	const dayNum = d.getDate();
	return `${month} ${dayNum} — ${day.toUpperCase()}`;
}
---

<section class="changelog" aria-label="Status log">
	<hr class="changelog-divider" aria-hidden="true" />
	<h2 class="changelog-heading">STATUS LOG</h2>

	<div class="timeline" role="list">
		{entries.map((entry, i) => (
			<div
				class:list={["timeline-entry", { "is-current": entry.type === "current" }]}
				role="listitem"
				style={`animation-delay: ${0.1 + i * 0.08}s`}
			>
				<div class="timeline-marker" aria-hidden="true">
					<span class:list={["timeline-dot", { "dot-current": entry.type === "current" }]} />
				</div>
				<div class="timeline-content">
					<time class="timeline-date" datetime={entry.date}>
						[{formatDate(entry.date, entry.day)}]
					</time>
					<h3 class="timeline-title">{entry.title}</h3>
					<p class="timeline-body">{entry.body}</p>
				</div>
			</div>
		))}
	</div>
</section>

<style>
	.changelog {
		width: 100%;
		max-width: 540px;
		margin-top: 1rem;
		margin-bottom: 2rem;
	}

	.changelog-divider {
		border: none;
		border-top: 1px solid #1a1a1d;
		margin-bottom: 2rem;
	}

	.changelog-heading {
		font-family: 'Bebas Neue', sans-serif;
		font-size: clamp(1.2rem, 3vw, 1.6rem);
		font-weight: 400;
		letter-spacing: 0.2em;
		color: #4a484f;
		text-align: center;
		margin-bottom: 2rem;
	}

	.timeline {
		position: relative;
		padding-left: 1.5rem;
	}

	/* Vertical line */
	.timeline::before {
		content: '';
		position: absolute;
		left: 4px;
		top: 8px;
		bottom: 8px;
		width: 1px;
		background: #1a1a1d;
	}

	.timeline-entry {
		position: relative;
		display: flex;
		gap: 1rem;
		padding-bottom: 1.75rem;
		animation: fade-up 0.5s ease-out both;
	}

	.timeline-entry:last-child {
		padding-bottom: 0;
	}

	@keyframes fade-up {
		from {
			opacity: 0;
			transform: translateY(12px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	/* Marker */
	.timeline-marker {
		position: absolute;
		left: -1.5rem;
		top: 6px;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.timeline-dot {
		display: block;
		width: 9px;
		height: 9px;
		border-radius: 50%;
		background: #2a2a2d;
		border: 1px solid #3a3a3d;
	}

	.dot-current {
		background: #c9434d;
		border-color: #c9434d;
		box-shadow: 0 0 8px rgba(201, 67, 77, 0.5);
		animation: pulse-dot 2s ease-in-out infinite;
	}

	@keyframes pulse-dot {
		0%, 100% { opacity: 1; box-shadow: 0 0 8px rgba(201, 67, 77, 0.5); }
		50% { opacity: 0.5; box-shadow: 0 0 14px rgba(201, 67, 77, 0.7); }
	}

	/* Content */
	.timeline-content {
		text-align: left;
		min-width: 0;
	}

	.timeline-date {
		display: block;
		font-size: 0.65rem;
		letter-spacing: 0.12em;
		color: #4a484f;
		margin-bottom: 0.3rem;
		font-family: 'JetBrains Mono', monospace;
	}

	.timeline-title {
		font-family: 'JetBrains Mono', monospace;
		font-size: 0.8rem;
		font-weight: 500;
		color: #7a7880;
		margin-bottom: 0.35rem;
	}

	.timeline-body {
		font-size: 0.75rem;
		line-height: 1.65;
		color: #5a585f;
	}

	/* Current entry highlight */
	.is-current .timeline-title {
		color: #e8e6e3;
	}

	.is-current .timeline-body {
		color: #7a7880;
	}

	.is-current .timeline-content {
		padding-left: 0.75rem;
		border-left: 2px solid rgba(201, 67, 77, 0.3);
	}

	/* Reduced motion */
	@media (prefers-reduced-motion: reduce) {
		.timeline-entry { animation: none; }
		.dot-current { animation: none; box-shadow: 0 0 8px rgba(201, 67, 77, 0.5); }
	}
</style>
